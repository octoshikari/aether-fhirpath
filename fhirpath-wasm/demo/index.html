<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aether FHIRPath - Web Demo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ”¥ Aether FHIRPath Web Demo</h1>
            <p>Interactive FHIRPath expression evaluation powered by WebAssembly</p>
            <div class="version-info">
                <span id="version-info">Loading version...</span>
            </div>
        </header>

        <main>
            <div class="demo-section">
                <div class="input-section">
                    <h2>FHIR Resource (JSON)</h2>
                    <textarea id="resource-input" placeholder="Enter your FHIR resource JSON here...">
{
  "resourceType": "Patient",
  "id": "example",
  "name": [
    {
      "given": ["John", "Q"],
      "family": "Doe"
    }
  ],
  "gender": "male",
  "birthDate": "1974-12-25",
  "address": [
    {
      "line": ["534 Erewhon St"],
      "city": "PleasantVille",
      "state": "Vic",
      "postalCode": "3999"
    }
  ],
  "telecom": [
    {
      "system": "phone",
      "value": "555-1234",
      "use": "home"
    }
  ]
}</textarea>
                </div>

                <div class="expression-section">
                    <h2>FHIRPath Expression</h2>
                    <div class="expression-input-container">
                        <input type="text" id="expression-input" placeholder="Enter FHIRPath expression..." value="Patient.name.given">
                        <button id="evaluate-btn">Evaluate</button>
                        <button id="validate-btn">Validate</button>
                    </div>
                    <div class="quick-examples">
                        <h3>Quick Examples:</h3>
                        <div class="example-buttons">
                            <button class="example-btn" data-expression="Patient.name.given">Patient.name.given</button>
                            <button class="example-btn" data-expression="Patient.name.family">Patient.name.family</button>
                            <button class="example-btn" data-expression="Patient.gender">Patient.gender</button>
                            <button class="example-btn" data-expression="Patient.birthDate">Patient.birthDate</button>
                            <button class="example-btn" data-expression="Patient.address.city">Patient.address.city</button>
                            <button class="example-btn" data-expression="Patient.telecom.where(system='phone').value">Patient.telecom.where(system='phone').value</button>
                        </div>
                    </div>
                </div>

                <div class="result-section">
                    <h2>Result</h2>
                    <div id="result-container">
                        <div id="loading" class="hidden">Evaluating...</div>
                        <pre id="result-output">Click "Evaluate" to see results here</pre>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>
                Built with <a href="https://github.com/octoshikari/aether-fhirpath" target="_blank">Aether FHIRPath</a> -
                A high-performance FHIRPath implementation in Rust with WebAssembly bindings
            </p>
        </footer>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
